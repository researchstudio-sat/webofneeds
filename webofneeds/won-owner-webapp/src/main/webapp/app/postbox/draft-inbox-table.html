<!DOCTYPE html>
<!--
  ~ Copyright 2012  Research Studios Austria Forschungsges.m.b.H.
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->


    <div class="col-lg-12">
        <div id="draftsCollapse" class="well div-table col-lg-12">
            <div class="div-table-row">
                <div class="div-table-cell pull-left additional-info-title text-center">{{type}}</div>
                <div class="div-table-cell pull-right">
                                <span >
                                    <a href="" ng-show="isCollapsed()" class="glyphicon glyphicon-chevron-down"
                                       ng-click="collapseClick()"></a>
                                </span>
                                <span >
                                    <a href="" ng-show="!isCollapsed()" class="glyphicon glyphicon-chevron-up"
                                       ng-click="collapseClick()"></a>
                                </span>
                </div>
            </div>
        </div>
        <div ng-show="!collapsed" class="div-table col-lg-12">
            <table id="draft-table" st-table="drafts" class="table table-hover table-striped">
                <thead>
                <tr>
                    <th st-sort="type">Type</th>
                    <th ng-click="setSortParams('title')">Title</th>
                    <th ng-click="setSortParams('meta.timestamp')">
                        Created on
                    </th>
                    <th></th>
                </tr>
                </thead>
                <tbody>

                <tr ng-show="hasItems()"
                    ng-repeat="item in items | orderObjectBy:sortedField:reversedSort | filter: search">
                    <td class="col-lg-1">
                        <span style="display: none;">{{item.basicNeedType}}</span>
                        <img application-control ng-src="{{getTypePicURI(item.basicNeedType)}}"
                             tooltip="{{item.basicNeedType}} (click to filter)"/>
                    </td>
                    <!-- TODO step in create need needs to be specified -->
                    <td><a href="" ng-click="clickOn(item);" style="font-weight:bold;">{{item
                        .title}}</a></td>
                    <td>{{item.meta.timestamp | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                    <td><a href="" ng-click="clickOnRemove(item);"><i class
                                                                                     ="fa fa-times-circle-o fa-lg"></i></a></td>
                </tr>
                <tr ng-show="items.length<1">
                    <td class="col-lg-1">
                    </td>
                    <td>You don't have drafts yet. </td>
                    <td>
                    </td>
                    <td></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
